<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="no-referrer">
    <title>å…¨èƒ½å½±é™¢ Pro</title>
    <style>
        body { margin: 0; padding: 0; color: white; font-family: -apple-system, sans-serif; min-height: 100vh; display: flex; flex-direction: column; align-items: center; background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #141e30); background-size: 400% 400%; animation: gradientBG 15s ease infinite; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        /* é€šç”¨æ¯›ç»ç’ƒæ•ˆæœ */
        .glass-panel { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37); }
        
        /* --- æ–°å¢ï¼šé¡¶éƒ¨å¸¸é©»å…¬å‘Šæ æ ·å¼ --- */
        .notice-board {
            width: 90%;
            max-width: 600px;
            margin-top: 40px; /* è·ç¦»é¡¶éƒ¨çš„è·ç¦» */
            border-radius: 12px;
            padding: 15px 20px;
            box-sizing: border-box;
            z-index: 2;
            text-align: left;
            transition: transform 0.3s;
        }
        .notice-board:hover { transform: translateY(2px); background: rgba(255, 255, 255, 0.08); }
        .notice-title { 
            color: #00f2ff; 
            font-weight: bold; 
            font-size: 15px; 
            margin-bottom: 8px; 
            display: flex; 
            align-items: center; 
            gap: 8px;
        }
        .notice-content { 
            font-size: 13px; 
            color: #ccc; 
            line-height: 1.6; 
        }
        .notice-content p { margin: 4px 0; }
        .highlight { color: #ff9f0a; font-weight: bold; }

        /* è°ƒæ•´åŸæœ‰ Header ä½ç½®ï¼Œç»™å…¬å‘Šæ è…¾å‡ºç©ºé—´ */
        .header-container { margin-top: 40px; text-align: center; width: 92%; max-width: 600px; z-index: 2; transition: all 0.5s; }
        
        h1 { font-size: 2.5rem; margin-bottom: 30px; background: linear-gradient(to right, #ff3b30, #ff9f0a, #ff3b30); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .search-group { display: flex; border-radius: 50px; padding: 5px; height: 55px; align-items: center; transition: transform 0.3s ease; }
        .search-group:focus-within { transform: scale(1.02); box-shadow: 0 0 25px rgba(255, 59, 48, 0.3); }
        input { flex: 1; padding: 0 20px; border: none; background: transparent; color: white; font-size: 16px; outline: none; height: 100%; text-align: center; }
        button { padding: 0 30px; height: 45px; border-radius: 40px; border: none; background: linear-gradient(90deg, #ff3b30, #ff6b6b); color: white; font-weight: bold; font-size: 16px; cursor: pointer; }
        
        .my-section { width: 95%; max-width: 1000px; margin-top: 50px; display: none; }
        .section-header { display: flex; justify-content: space-between; padding: 0 10px 5px; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 15px; font-size: 14px; color: #ff9f0a; font-weight: bold; }
        .clear-btn { color: rgba(255,255,255,0.5); font-weight: normal; cursor: pointer; }
        .history-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        @media (min-width: 600px) { .history-grid { grid-template-columns: repeat(6, 1fr); } }
        
        .v-card { text-decoration: none; color: white; display: flex; flex-direction: column; border-radius: 8px; overflow: hidden; transition: transform 0.2s; }
        .v-card:active { transform: scale(0.95); }
        .v-img-box { width: 100%; aspect-ratio: 2/3; position: relative; background: #222; overflow: hidden; margin-bottom: 8px; border-radius: 6px; }
        .v-img { width: 100%; height: 100%; object-fit: cover; }
        .v-title { font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: center; color: #eee; margin-bottom: 2px; }
        .v-note { font-size: 11px; color: #888; text-align: center; }
    </style>
</head>
<body>
    
    <div class="notice-board glass-panel">
        <div class="notice-title">ğŸ“¢ 1æœˆ11æ—¥æ›´æ–°æ—¥å¿— & ä½¿ç”¨è¯´æ˜ï¼ˆé‡æ–°è¿›å…¥è§£å†³99%å¡é¡¿ï¼‰</div>
        <div class="notice-content">
            <p>1. <span class="highlight">é«˜æ¸…åˆ‡æ¢</span>ï¼šå¦‚æƒ³æ›´æ¢æ¸…æ™°åº¦ï¼Œæ’­æ”¾é¡µç‚¹å‡»ã€âš¡ æ¢æºã€‘å¯æœå…¨ç½‘é«˜æ¸…çº¿è·¯ã€‚</p>
            <p>2. <span class="highlight">è¯·å¸®æ¨å¹¿</span>ï¼šæœ¬ç«™å…è´¹ä½¿ç”¨ï¼Œè¯·å¤šå¤šå¸®å¿™æ¨å¹¿ï¼Œæ›´å¤šäººä½¿ç”¨å°†ä¿ƒè¿›æˆ‘ä¸æ–­è¿›åŒ–ï¼</p>
            <p>3. <span class="highlight">å»ºè®®æ”¶è—</span>ï¼šæœ¬ç«™å°†è®¤çœŸçœ‹å¾…æ ¹æ®ç”¨æˆ·åé¦ˆï¼Œä¸å®šæ—¶æ›´æ–°åŠŸèƒ½ï¼å»ºè®®æ”¶è—è‡³æµè§ˆå™¨æˆ–æ·»åŠ è‡³æ¡Œé¢ï¼Œçœ‹å‰§ä¸è¿·è·¯ï¼ï¼</p>
            <p style="margin-top:5px; font-style:italic; opacity:0.7;">å¦‚æœ‰bugï¼Œæ„¿æ„åˆ†äº«å¯å‘é€é‚®ä»¶ï¼š3527485458@qq.com</p>
        </div>
    </div>
    <div class="header-container">
        <h1>MY FLIX V3.0</h1>
        <form action="/search" method="POST" class="search-group glass-panel">
            <input type="text" name="keyword" placeholder="æœä½ æƒ³æœ... ğŸš€" required autocomplete="off">
            <button type="submit">æœç´¢</button>
        </form>
    </div>

    <div class="my-section" id="favSection">
        <div class="section-header"><span>â¤ï¸ æˆ‘çš„æ”¶è—(æ’­æ”¾é¡µç‚¹å‡»æ”¶è—åï¼Œå°†åœ¨è¿™é‡Œå±•ç¤º)</span><span class="clear-btn" onclick="clearLocal('fav_list')">æ¸…ç©º</span></div>
        <div class="history-grid" id="favGrid"></div>
    </div>
    <div class="my-section" id="historySection">
        <div class="section-header"><span>ğŸ•˜ ç»§ç»­è§‚çœ‹ï¼ˆä¸Šæ¬¡è§‚çœ‹çš„å†å²è®°å½•ï¼Œä¸€é”®ç»­æ’­ï¼‰</span><span class="clear-btn" onclick="clearLocal('history_list')">æ¸…ç©º</span></div>
        <div class="history-grid" id="historyGrid"></div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            renderLocalList('fav_list', 'favGrid', 'favSection');
            renderLocalList('history_list', 'historyGrid', 'historySection');
        });

        function renderLocalList(key, gridId, sectionId) {
            var grid = document.getElementById(gridId);
            var listData = localStorage.getItem(key);
            if (!listData || JSON.parse(listData).length === 0) {
                document.getElementById(sectionId).style.display = 'none'; return;
            }
            document.getElementById(sectionId).style.display = 'block';
            grid.innerHTML = '';
            JSON.parse(listData).forEach(function(item) {
                var html = `
                <a href="/play?id=${item.id}&ep_index=${item.ep_index || 0}&api=${encodeURIComponent(item.api)}" class="v-card">
                    <div class="v-img-box"><img src="${item.pic}" class="v-img" loading="lazy" referrerpolicy="no-referrer" onerror="this.style.background='#333'"></div>
                    <div class="v-title">${item.title}</div>
                    <div class="v-note">${item.ep_name || 'ç»§ç»­è§‚çœ‹'}</div>
                </a>`;
                grid.insertAdjacentHTML('beforeend', html);
            });
        }
        function clearLocal(key) { localStorage.removeItem(key); location.reload(); }
    </script>
</body>
</html>